<table class="table table-striped table-bordered table-hover">
  <thead>
    <caption><%= title %></caption>
    <tr>
      <th><%= ToolAssignment.human_attribute_name('created_at') %></th>
      <th><%= ToolAssignment.human_attribute_name('tool_type') %></th>
      <th><%= ToolAssignment.human_attribute_name('tool_brand') %></th>
      <th><%= Tool.human_attribute_name('tool_number') %></th>
      <th><%= ToolAssignment.human_attribute_name('status') %></th>
      <th><%= t('actions') %></th>
    </tr>
  </thead>
  <tbody>
    <% assignments.each do |assign| -%>
      <tr>
        <td><%= l assign.created_at %></td>
        <td><%= assign.tool_type.identification %></td>
        <td><%= assign.tool_brand.name %></td>
        <td><%= assign.tool.tool_number %></td>
        <td><%= translate_collection_options(assign, :status) %></td>
        <td>
          <% if !assign.discarded? -%>
            <%= link_to t('views.modules.tool_management.break'), break_tool_assignment_path(assign),
              method: :put, class: "btn btn-small btn-danger",
              confirm: t('views.modules.tool_management.break_confirmation') if can? :break, assign %>
            <%= link_to t('views.modules.tool_management.lose'), lose_tool_assignment_path(assign),
              method: :put, class: "btn btn-small btn-danger",
              confirm: t('views.modules.tool_management.lose_confirmation') if can? :lose, assign %>
          <% end -%>
        </td>
      </tr>
    <% end -%>
  </tbody>
</table>

<% if lacking_tools.present? -%>
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <caption><%= title %> 缺少的工具</caption>
      <tr>
        <th><%= ToolSuiteItem.human_attribute_name('tool_type') %></th>
        <th><%= ToolSuiteItem.human_attribute_name('quantity') %></th>
        <th><%= ToolSuiteItem.human_attribute_name('required') %></th>
      </tr>
    </thead>
    <tbody>
      <% lacking_tools.each do |tool_type_id, suite_item| -%>
        <tr class="<%= 'warning' if suite_item.required %>">
          <td><%= suite_item.tool_type.identification %></td>
          <td><%= suite_item.quantity %></td>
          <td><%= translate_boolean(suite_item.required) %></td>
        </tr>
      <% end -%>
    </tbody>
  </table>
<% end -%>
