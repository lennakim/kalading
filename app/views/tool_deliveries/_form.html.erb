<%= simple_nested_form_for @tool_delivery, html: { class: 'form-horizontal' } do |f| %>
  <%= f.association :to_city, collection: City.all, label_method: :name, prompt: :translate %>

  <table id="tool_delivery_items" class="table table-hover">
    <thead>
      <th><%= ToolDeliveryItem.human_attribute_name('tool_type') %></th>
      <th><%= ToolDeliveryItem.human_attribute_name('tool_brand') %></th>
      <th><%= ToolDeliveryItem.human_attribute_name('quantity') %></th>
      <th></th>
    </thead>
    <tbody>
      <%= f.fields_for :tool_delivery_items, wrapper: false do |nf| %>
        <tr class="fields">
          <td>
            <%= nf.association :tool_type, label: false, wrapper: :inline,
              collection: ToolType.all, label_method: :name, prompt: :translate %>
          </td>
          <td>
            <%= nf.association :tool_brand, label: false, wrapper: :inline,
              collection: ToolBrand.all, label_method: :name, prompt: :translate %>
          </td>
          <td>
            <%= nf.input :quantity, label: false, wrapper: :inline, input_html: { class: 'input-mini'} %>
          </td>
          <td>
            <%= nf.link_to_remove t('destroy'), class: 'btn btn-small btn-danger' %>
          </td>
        </tr>
      <% end -%>
    </tbody>
  </table>
  <p>
    <%= f.link_to_add '添加调货项', :tool_delivery_items, data: { target: '#tool_delivery_items' }, class: 'btn btn-small btn-info' %>
  </p>

  <div class="form-actions">
    <%= f.button :submit, t('save'), class: 'btn btn-primary' %>
    <%= link_to t('cancel'), tool_deliveries_path, class: 'btn' %>
  </div>
<% end -%>
